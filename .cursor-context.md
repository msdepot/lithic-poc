# Cursor Background Agent - Context Guide

## ü§ñ **Lithic POC Project Context**

### **Project Overview**
This is a **production-ready payment card management POC** with real Lithic sandbox API integration. The project demonstrates complete fintech application patterns including RBAC, card lifecycle management, and custom spending profiles.

### **Current Status: 85% Complete**
- ‚úÖ **Authentication & RBAC** - 5-tier role system working
- ‚úÖ **Lithic Integration** - Real account holders created in sandbox
- ‚úÖ **Database & API** - Complete Node.js framework with PostgreSQL
- ‚úÖ **Business Logic** - User and account management functional
- ‚è≥ **Remaining** - Card creation testing and user hierarchy completion

## üéØ **Key Information for Background Agent**

### **Repository**
- **GitHub:** https://github.com/msdepot/lithic-poc
- **Status:** Active development, well-documented
- **Branch:** main
- **Last Update:** Agent setup guide added

### **Technology Stack**
- **Backend:** Node.js 18.20.8 + Express.js
- **Database:** PostgreSQL via Supabase (local instance)
- **Integration:** Lithic Sandbox API
- **Authentication:** JWT with bcrypt
- **ORM:** Sequelize with comprehensive models

### **Lithic Integration Details**
- **API Key:** `595234f1-968e-4fad-b308-41f6e19bc93f` (sandbox)
- **Environment:** sandbox
- **Account Holder:** `be03e066-bd0a-445b-ae2a-97e1a81cff0c` (Eric Medina)
- **Financial Account:** `fin_acct_a7mw8lzqd` (MSD Cafe)
- **Status:** Real API calls working, not mocked

### **Current Data State**
- **Admin User:** `admin/admin123` (System Owner)
- **Eric Medina:** Super Admin, Business Owner (user_id: 2)
- **MSD Cafe:** Business account with $15,000 funding
- **Database Schema:** Complete with all tables and relationships

## üìã **Immediate Tasks (Next Session)**

### **High Priority (15% remaining work)**
1. **Fix Postman JSON parsing** - Set `eric_user_id = 2` in environment
2. **Create remaining users** - Seth, Gabriel, Nathalia, Lindsey Medina
3. **Test card creation** - All 4 card types with Lithic integration
4. **Implement spending profiles** - Auth rules integration with Lithic
5. **End-to-end validation** - Complete MSD Cafe scenario

### **Success Criteria**
- All 5 Medina family members created with proper roles
- 4 cards created (debit, prepaid, limit-based) with Lithic tokens
- Spending profile working with Lithic auth rules
- RBAC validation confirmed (Lindsey blocked from cards)
- Complete Postman collection runs successfully

## üõ†Ô∏è **Development Commands**

### **Start Development**
```bash
./start.sh  # Starts Supabase + API server
```

### **Access Points**
- **API:** http://localhost:3000
- **Database Studio:** http://127.0.0.1:54323
- **Health:** http://localhost:3000/health

### **Stop Development**
```bash
./stop.sh  # Stops all services
```

## üìö **Key Files for Context**

### **Entry Points**
- **`README.md`** - Project overview
- **`SESSION_SUMMARY.md`** - Current accomplishments  
- **`TODO.md`** - Remaining tasks with priorities
- **`AGENT_SETUP.md`** - Complete context for agents

### **Core Implementation**
- **`src/app.js`** - Main application
- **`src/config/lithic.js`** - Lithic API integration
- **`src/controllers/`** - Business logic
- **`src/routes/`** - API endpoints
- **`supabase/`** - Database configuration

### **Testing**
- **`Lithic_POC_Corrected_Flow.postman_collection.json`** - Complete test suite
- **Environment:** Set `base_url = http://localhost:3000/api`

## üéØ **Business Scenario Context**

### **MSD Cafe Restaurant Business**
- **Owner:** Eric Medina (Super Admin role)
- **Business Account:** MSD Cafe with Lithic financial account
- **Family Members:** Each with different roles and card types
- **Goal:** Demonstrate complete payment card management lifecycle

### **RBAC Hierarchy**
- **Admin** (System Owner) ‚Üí **Eric** (Business Owner) ‚Üí **Seth/Gabriel** (Admins) ‚Üí **Nathalia** (User) + **Lindsey** (Analyst)

This context provides everything needed for a background agent to continue development efficiently! üöÄ
